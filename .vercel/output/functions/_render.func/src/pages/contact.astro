---
import BaseLayout from '../layouts/BaseLayout.astro';
import Container from '../components/ui/Container.astro';
import Button from '../components/ui/Button.astro';

const contactMethods = [
  {
    title: 'Email',
    value: 'contact@rework-agency.com',
    href: 'mailto:contact@rework-agency.com',
    icon: 'M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z',
    description: 'Réponse sous 24h',
    color: 'from-violet-500 to-purple-500',
  },
  {
    title: 'Téléphone',
    value: '+33 1 23 45 67 89',
    href: 'tel:+33123456789',
    icon: 'M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z',
    description: 'Lun-Ven, 9h-18h',
    color: 'from-cyan-500 to-blue-500',
  },
  {
    title: 'Localisation',
    value: 'Paris, France',
    href: null,
    icon: 'M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z M15 11a3 3 0 11-6 0 3 3 0 016 0z',
    description: 'Rendez-vous sur place',
    color: 'from-emerald-500 to-teal-500',
  },
];

const faqs = [
  {
    question: 'Quels sont vos délais de réponse ?',
    answer: 'Nous nous engageons à répondre à toutes les demandes sous 24 heures ouvrées. Pour les projets urgents, nous pouvons organiser un appel le jour même.',
  },
  {
    question: 'Travaillez-vous avec des clients internationaux ?',
    answer: 'Oui, nous travaillons avec des clients du monde entier. Nos communications peuvent se faire en français ou en anglais, et nous nous adaptons aux différents fuseaux horaires.',
  },
  {
    question: 'Comment se déroule un premier échange ?',
    answer: 'Après réception de votre message, nous organisons un appel de découverte gratuit de 30 minutes pour comprendre votre projet, vos objectifs et répondre à vos questions.',
  },
  {
    question: 'Proposez-vous des devis gratuits ?',
    answer: 'Oui, tous nos devis sont gratuits et sans engagement. Nous prenons le temps d\'analyser votre projet pour vous proposer une estimation précise et détaillée.',
  },
];
---

<BaseLayout
  title="Contact"
  description="Contactez Rework Agency pour discuter de votre projet web ou e-commerce. Devis gratuit et réponse sous 24h."
>
  <!-- Hero Section -->
  <section class="relative pt-32 pb-20 overflow-hidden">
    <!-- Background -->
    <div class="absolute inset-0 grid-bg opacity-30"></div>
    <div class="absolute top-0 left-0 w-[600px] h-[600px] bg-gradient-to-br from-accent-secondary/20 via-accent-primary/10 to-transparent rounded-full blur-3xl"></div>
    <div class="absolute bottom-0 right-0 w-[400px] h-[400px] bg-gradient-to-tl from-accent-primary/15 to-transparent rounded-full blur-3xl"></div>

    <Container class="relative z-10">
      <div class="max-w-4xl mx-auto text-center">
        <!-- Badge -->
        <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 backdrop-blur-sm mb-8 reveal">
          <span class="w-2 h-2 rounded-full bg-gradient-to-r from-accent-primary to-accent-secondary animate-pulse"></span>
          <span class="text-sm text-text-secondary">Parlons de votre projet</span>
        </div>

        <h1 class="text-5xl md:text-6xl lg:text-7xl font-bold tracking-tight mb-6 reveal">
          Donnons vie à vos <span class="bg-gradient-to-r from-accent-primary via-purple-400 to-accent-secondary bg-clip-text text-transparent">idées</span>
        </h1>

        <p class="text-xl text-text-secondary max-w-2xl mx-auto reveal">
          Une question, un projet, une idée ? Nous sommes là pour vous accompagner.
          Remplissez le formulaire et nous vous répondrons rapidement.
        </p>
      </div>
    </Container>
  </section>

  <!-- Contact Methods -->
  <section class="py-12">
    <Container>
      <div class="grid md:grid-cols-3 gap-6 reveal">
        {contactMethods.map((method) => (
          <div class="group relative">
            <div class="absolute inset-0 bg-gradient-to-br opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl blur-xl" class:list={[method.color]}></div>
            <div class="relative p-6 rounded-2xl bg-white/5 border border-white/10 backdrop-blur-sm hover:border-accent-primary/50 transition-all duration-500">
              <div class:list={['w-14 h-14 rounded-xl bg-gradient-to-br flex items-center justify-center mb-4', method.color]}>
                <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d={method.icon} />
                </svg>
              </div>
              <h3 class="font-semibold text-lg mb-1">{method.title}</h3>
              {method.href ? (
                <a href={method.href} class="text-accent-primary hover:underline block mb-2">
                  {method.value}
                </a>
              ) : (
                <p class="text-text-primary mb-2">{method.value}</p>
              )}
              <p class="text-text-muted text-sm">{method.description}</p>
            </div>
          </div>
        ))}
      </div>
    </Container>
  </section>

  <!-- Form Section -->
  <section class="py-20">
    <Container>
      <div class="grid lg:grid-cols-5 gap-12">
        <!-- Contact Form -->
        <div class="lg:col-span-3">
          <div class="p-8 md:p-10 rounded-3xl bg-white/5 border border-white/10 backdrop-blur-sm reveal">
            <div class="mb-8">
              <h2 class="text-3xl font-bold mb-2">Envoyez-nous un message</h2>
              <p class="text-text-secondary">Décrivez votre projet et nous vous recontacterons rapidement.</p>
            </div>

            <form class="space-y-6" id="contact-form">
              <div class="grid md:grid-cols-2 gap-6">
                <div>
                  <label for="name" class="block text-sm font-medium text-text-secondary mb-2">
                    Nom complet <span class="text-accent-primary">*</span>
                  </label>
                  <input
                    type="text"
                    id="name"
                    name="name"
                    required
                    class="w-full px-5 py-4 rounded-xl bg-bg-tertiary border border-white/10 text-white placeholder:text-text-muted focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary/50 transition-all"
                    placeholder="Jean Dupont"
                  />
                </div>
                <div>
                  <label for="email" class="block text-sm font-medium text-text-secondary mb-2">
                    Email <span class="text-accent-primary">*</span>
                  </label>
                  <input
                    type="email"
                    id="email"
                    name="email"
                    required
                    class="w-full px-5 py-4 rounded-xl bg-bg-tertiary border border-white/10 text-white placeholder:text-text-muted focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary/50 transition-all"
                    placeholder="jean@exemple.com"
                  />
                </div>
              </div>

              <div class="grid md:grid-cols-2 gap-6">
                <div>
                  <label for="company" class="block text-sm font-medium text-text-secondary mb-2">
                    Entreprise
                  </label>
                  <input
                    type="text"
                    id="company"
                    name="company"
                    class="w-full px-5 py-4 rounded-xl bg-bg-tertiary border border-white/10 text-white placeholder:text-text-muted focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary/50 transition-all"
                    placeholder="Votre entreprise"
                  />
                </div>
                <div>
                  <label for="budget" class="block text-sm font-medium text-text-secondary mb-2">
                    Budget estimé
                  </label>
                  <select
                    id="budget"
                    name="budget"
                    class="w-full px-5 py-4 rounded-xl bg-bg-tertiary border border-white/10 text-white focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary/50 transition-all"
                  >
                    <option value="">Sélectionnez...</option>
                    <option value="< 5k">Moins de 5 000 €</option>
                    <option value="5k-10k">5 000 € - 10 000 €</option>
                    <option value="10k-25k">10 000 € - 25 000 €</option>
                    <option value="25k-50k">25 000 € - 50 000 €</option>
                    <option value="> 50k">Plus de 50 000 €</option>
                  </select>
                </div>
              </div>

              <div>
                <label for="service" class="block text-sm font-medium text-text-secondary mb-2">
                  Type de projet
                </label>
                <select
                  id="service"
                  name="service"
                  class="w-full px-5 py-4 rounded-xl bg-bg-tertiary border border-white/10 text-white focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary/50 transition-all"
                >
                  <option value="">Sélectionnez...</option>
                  <option value="website">Site vitrine</option>
                  <option value="ecommerce">E-commerce</option>
                  <option value="webapp">Application web</option>
                  <option value="wordpress">WordPress headless</option>
                  <option value="design">UI/UX Design</option>
                  <option value="maintenance">Maintenance</option>
                  <option value="other">Autre</option>
                </select>
              </div>

              <div>
                <label for="message" class="block text-sm font-medium text-text-secondary mb-2">
                  Votre message <span class="text-accent-primary">*</span>
                </label>
                <textarea
                  id="message"
                  name="message"
                  required
                  rows="5"
                  class="w-full px-5 py-4 rounded-xl bg-bg-tertiary border border-white/10 text-white placeholder:text-text-muted focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary/50 transition-all resize-none"
                  placeholder="Décrivez votre projet, vos objectifs, vos délais..."
                ></textarea>
              </div>

              <!-- Honeypot -->
              <input type="text" name="website" class="hidden" tabindex="-1" autocomplete="off" />

              <div class="flex items-start gap-3">
                <input
                  type="checkbox"
                  id="privacy"
                  name="privacy"
                  required
                  class="w-5 h-5 mt-0.5 rounded border-white/10 bg-bg-tertiary text-accent-primary focus:ring-accent-primary"
                />
                <label for="privacy" class="text-sm text-text-secondary">
                  J'accepte que mes données soient utilisées pour me recontacter.
                  <a href="/politique-confidentialite" class="text-accent-primary hover:underline">Politique de confidentialité</a>
                </label>
              </div>

              <Button type="submit" size="lg" class="w-full group">
                <span>Envoyer le message</span>
                <svg class="w-5 h-5 ml-2 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                </svg>
              </Button>

              <div id="form-status" class="hidden text-center p-4 rounded-xl"></div>
            </form>
          </div>
        </div>

        <!-- Sidebar -->
        <div class="lg:col-span-2 space-y-6">
          <!-- Schedule Call Card -->
          <div class="p-6 rounded-2xl bg-gradient-to-br from-accent-primary/20 to-accent-secondary/20 border border-accent-primary/30 reveal">
            <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-accent-primary to-accent-secondary flex items-center justify-center mb-4">
              <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
            </div>
            <h3 class="font-semibold text-xl mb-2">Préférez un appel ?</h3>
            <p class="text-text-secondary mb-4">
              Réservez un créneau de 30 minutes pour discuter de votre projet directement avec notre équipe.
            </p>
            <Button href="#" variant="outline" size="sm" class="w-full">
              Réserver un appel
            </Button>
          </div>

          <!-- Hours Card -->
          <div class="p-6 rounded-2xl bg-white/5 border border-white/10 reveal">
            <h3 class="font-semibold text-lg mb-4 flex items-center gap-2">
              <svg class="w-5 h-5 text-accent-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              Horaires
            </h3>
            <div class="space-y-3">
              <div class="flex justify-between items-center py-2 border-b border-white/5">
                <span class="text-text-secondary">Lundi - Vendredi</span>
                <span class="font-medium">9h - 18h</span>
              </div>
              <div class="flex justify-between items-center py-2 border-b border-white/5">
                <span class="text-text-secondary">Samedi</span>
                <span class="text-text-muted">Sur rendez-vous</span>
              </div>
              <div class="flex justify-between items-center py-2">
                <span class="text-text-secondary">Dimanche</span>
                <span class="text-text-muted">Fermé</span>
              </div>
            </div>
          </div>

          <!-- Response Time Card -->
          <div class="p-6 rounded-2xl bg-white/5 border border-white/10 reveal">
            <div class="flex items-center gap-4">
              <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500/20 to-teal-500/20 flex items-center justify-center flex-shrink-0">
                <svg class="w-6 h-6 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                </svg>
              </div>
              <div>
                <h3 class="font-semibold">Réponse rapide</h3>
                <p class="text-text-muted text-sm">Sous 24h ouvrées garanties</p>
              </div>
            </div>
          </div>

          <!-- Social Links -->
          <div class="p-6 rounded-2xl bg-white/5 border border-white/10 reveal">
            <h3 class="font-semibold text-lg mb-4">Suivez-nous</h3>
            <div class="flex gap-3">
              <a href="#" aria-label="LinkedIn" class="w-12 h-12 rounded-xl bg-white/5 border border-white/10 hover:bg-accent-primary/20 hover:border-accent-primary/50 transition-all flex items-center justify-center group focus:outline-none focus:ring-2 focus:ring-accent-primary focus:ring-offset-2 focus:ring-offset-bg-primary">
                <svg class="w-5 h-5 text-text-muted group-hover:text-accent-primary transition-colors" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z" />
                </svg>
              </a>
              <a href="#" aria-label="X (Twitter)" class="w-12 h-12 rounded-xl bg-white/5 border border-white/10 hover:bg-accent-primary/20 hover:border-accent-primary/50 transition-all flex items-center justify-center group focus:outline-none focus:ring-2 focus:ring-accent-primary focus:ring-offset-2 focus:ring-offset-bg-primary">
                <svg class="w-5 h-5 text-text-muted group-hover:text-accent-primary transition-colors" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
                </svg>
              </a>
              <a href="#" aria-label="GitHub" class="w-12 h-12 rounded-xl bg-white/5 border border-white/10 hover:bg-accent-primary/20 hover:border-accent-primary/50 transition-all flex items-center justify-center group focus:outline-none focus:ring-2 focus:ring-accent-primary focus:ring-offset-2 focus:ring-offset-bg-primary">
                <svg class="w-5 h-5 text-text-muted group-hover:text-accent-primary transition-colors" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z" />
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>
    </Container>
  </section>

  <!-- FAQ Section -->
  <section class="py-24 bg-bg-secondary/50">
    <Container>
      <div class="max-w-3xl mx-auto">
        <div class="text-center mb-12 reveal">
          <h2 class="text-3xl md:text-4xl font-bold mb-4">
            Questions <span class="bg-gradient-to-r from-accent-primary to-accent-secondary bg-clip-text text-transparent">fréquentes</span>
          </h2>
          <p class="text-text-secondary">Tout ce que vous devez savoir avant de nous contacter</p>
        </div>

        <div class="space-y-4" role="list">
          {faqs.map((faq, index) => (
            <div class="faq-item rounded-2xl bg-white/5 border border-white/10 overflow-hidden reveal" style={`animation-delay: ${index * 0.1}s`} role="listitem">
              <button
                type="button"
                class="faq-trigger w-full px-6 py-5 flex items-center justify-between text-left group focus:outline-none focus:ring-2 focus:ring-accent-primary focus:ring-inset"
                aria-expanded="false"
                aria-controls={`faq-answer-${index}`}
                id={`faq-question-${index}`}
              >
                <span class="font-semibold pr-4 group-hover:text-accent-primary transition-colors">{faq.question}</span>
                <svg class="faq-icon w-5 h-5 text-text-muted flex-shrink-0 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
              </button>
              <div
                class="faq-content px-6 pb-5 hidden"
                id={`faq-answer-${index}`}
                aria-labelledby={`faq-question-${index}`}
                role="region"
              >
                <p class="text-text-secondary">{faq.answer}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </Container>
  </section>
</BaseLayout>

<style>
  .reveal {
    opacity: 0;
    transform: translateY(20px);
  }

  .reveal.visible {
    opacity: 1;
    transform: translateY(0);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }

  .faq-item.open .faq-icon {
    transform: rotate(180deg);
  }

  .faq-item.open .faq-content {
    display: block;
  }
</style>

<script>
  // FAQ accordion
  document.querySelectorAll('.faq-trigger').forEach(trigger => {
    trigger.addEventListener('click', () => {
      const item = trigger.closest('.faq-item');
      const wasOpen = item?.classList.contains('open');

      // Close all items and reset aria-expanded
      document.querySelectorAll('.faq-item').forEach(i => {
        i.classList.remove('open');
        i.querySelector('.faq-trigger')?.setAttribute('aria-expanded', 'false');
      });

      // Toggle clicked item
      if (!wasOpen) {
        item?.classList.add('open');
        trigger.setAttribute('aria-expanded', 'true');
      }
    });

    // Keyboard support - Enter and Space already work on buttons, but add support for navigation
    trigger.addEventListener('keydown', (e) => {
      const items = Array.from(document.querySelectorAll('.faq-trigger'));
      const index = items.indexOf(trigger);

      if (e.key === 'ArrowDown' && index < items.length - 1) {
        e.preventDefault();
        (items[index + 1] as HTMLElement).focus();
      } else if (e.key === 'ArrowUp' && index > 0) {
        e.preventDefault();
        (items[index - 1] as HTMLElement).focus();
      } else if (e.key === 'Home') {
        e.preventDefault();
        (items[0] as HTMLElement).focus();
      } else if (e.key === 'End') {
        e.preventDefault();
        (items[items.length - 1] as HTMLElement).focus();
      }
    });
  });

  // Form submission
  const form = document.getElementById('contact-form') as HTMLFormElement;
  const status = document.getElementById('form-status');
  const submitBtn = form?.querySelector('button[type="submit"]') as HTMLButtonElement;

  // WordPress CF7 configuration
  const WP_URL = 'http://local.rework.com';
  const CF7_FORM_ID = '1';

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();

    const formData = new FormData(form);

    // Honeypot check
    if (formData.get('website')) return;

    // Disable submit button
    if (submitBtn) {
      submitBtn.disabled = true;
      submitBtn.innerHTML = `
        <svg class="animate-spin w-5 h-5 mr-2" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        Envoi en cours...
      `;
    }

    try {
      // Prepare CF7 form data
      const cf7Data = new FormData();
      cf7Data.append('your-name', formData.get('name') as string);
      cf7Data.append('your-email', formData.get('email') as string);
      cf7Data.append('your-company', formData.get('company') as string || '');
      cf7Data.append('your-budget', formData.get('budget') as string || '');
      cf7Data.append('your-service', formData.get('service') as string || '');
      cf7Data.append('your-message', formData.get('message') as string);

      const response = await fetch(
        `${WP_URL}/wp-json/contact-form-7/v1/contact-forms/${CF7_FORM_ID}/feedback`,
        {
          method: 'POST',
          body: cf7Data,
        }
      );

      const result = await response.json();

      if (result.status === 'mail_sent') {
        if (status) {
          status.classList.remove('hidden', 'bg-red-500/10', 'text-red-400');
          status.classList.add('bg-emerald-500/10', 'text-emerald-400');
          status.textContent = result.message || 'Message envoyé avec succès ! Nous vous répondrons rapidement.';
        }
        form.reset();
      } else if (result.status === 'validation_failed') {
        if (status) {
          status.classList.remove('hidden', 'bg-emerald-500/10', 'text-emerald-400');
          status.classList.add('bg-red-500/10', 'text-red-400');
          const errors = result.invalid_fields?.map((f: any) => f.message).join(', ') || '';
          status.textContent = result.message + (errors ? ` (${errors})` : '');
        }
      } else {
        throw new Error(result.message || 'Erreur lors de l\'envoi');
      }
    } catch (error) {
      console.error('Contact form error:', error);

      if (status) {
        // Check if it's a network error (WordPress not available)
        if (error instanceof TypeError && error.message.includes('fetch')) {
          // Demo mode
          status.classList.remove('hidden', 'bg-red-500/10', 'text-red-400');
          status.classList.add('bg-emerald-500/10', 'text-emerald-400');
          status.textContent = 'Message envoyé avec succès ! (Mode démo)';
          form.reset();
        } else {
          status.classList.remove('hidden', 'bg-emerald-500/10', 'text-emerald-400');
          status.classList.add('bg-red-500/10', 'text-red-400');
          status.textContent = 'Une erreur est survenue. Veuillez réessayer.';
        }
      }
    } finally {
      if (submitBtn) {
        submitBtn.disabled = false;
        submitBtn.innerHTML = `
          <span>Envoyer le message</span>
          <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        `;
      }
    }
  });

  // Reveal animations
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, observerOptions);

  document.querySelectorAll('.reveal').forEach(el => {
    observer.observe(el);
  });
</script>
